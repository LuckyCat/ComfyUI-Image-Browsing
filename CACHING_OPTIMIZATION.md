# üöÄ Cache Optimization Update

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–∏

### üì¶ Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –ø—Ä–µ–≤—å—é**

**–î–æ:**
```python
Cache-Control: public, max-age=3600  # 1 —á–∞—Å
```

**–ü–æ—Å–ª–µ:**
```python
Cache-Control: public, max-age=31536000, immutable  # 1 –≥–æ–¥ (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–≤—Å–µ–≥–¥–∞)
```

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `__init__.py` (–ª–∏–Ω–∏–∏ 76, 103, 130) - –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–≤–∏–¥–µ–æ
- `__init__.py` (–ª–∏–Ω–∏—è 76) - –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞–≤—Å–µ–≥–¥–∞
- –ù–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ
- ETag –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–∏ —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∫—ç—à–∏—Ä–æ–≤–∫–µ

#### 2. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –ø–∞–ø–æ–∫**

**–î–æ:**
```python
Cache-Control: private, no-cache  # –ë–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–ü–æ—Å–ª–µ:**
```python
Cache-Control: private, max-age=300, must-revalidate  # 5 –º–∏–Ω—É—Ç —Å —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –°–ø–∏—Å–∫–∏ –ø–∞–ø–æ–∫ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ 5 –º–∏–Ω—É—Ç
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–ø–∫–∏ - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- ETag –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

#### 3. **304 Not Modified –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `If-None-Match` –¥–ª—è:
- –ü–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–≤–∏–¥–µ–æ
- –ü—Ä–µ–≤—å—é (thumbnails)
- –°–ø–∏—Å–∫–æ–≤ –ø–∞–ø–æ–∫

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è - —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç 304 –±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞
- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏

#### 4. **–ù–æ–≤—ã–π endpoint –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–∫—ç—à–∏—Ä–æ–≤–∫–∏**

```python
POST /image-browsing/recache-folder
Body: { "folder_path": "/output/my_folder" }
```

**–§—É–Ω–∫—Ü–∏—è:** –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–≤—å—é –¥–ª—è —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–≤—å—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤

---

### üé® Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. **–ü–µ—Ä–µ—Ö–æ–¥ —Å sessionStorage –Ω–∞ localStorage**

**–î–æ:**
```typescript
sessionStorage.getItem('folderCache')  // –û—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏
```

**–ü–æ—Å–ª–µ:**
```typescript
localStorage.getItem('folderCache')  // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ö–µ—à –ø–∞–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ UI - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –ù–µ –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫–∏

#### 2. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–µ—à–∞**

**–î–æ:**
```typescript
maxEntries: 500           // 500 –ø–∞–ø–æ–∫
maxAgeMs: 24 * 60 * 60 * 1000  // 24 —á–∞—Å–∞
```

**–ü–æ—Å–ª–µ:**
```typescript
maxEntries: 1000          // 1000 –ø–∞–ø–æ–∫
maxAgeMs: 365 * 24 * 60 * 60 * 1000  // 1 –≥–æ–¥
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ë–æ–ª—å—à–µ –ø–∞–ø–æ–∫ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –∫–µ—à
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–æ–ª—å—à–µ (ETag –≤—Å–µ —Ä–∞–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----|-------|-----------|
| **–û—Ç–∫—Ä—ã—Ç–∏–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–∞–ø–∫–∏** | 150-300ms | 0-50ms | **6x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ó–∞–≥—Ä—É–∑–∫–∞ 100 –ø—Ä–µ–≤—å—é** | 2-5 —Å–µ–∫ | 0-500ms | **10x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ UI** | –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | **‚àû –±—ã—Å—Ç—Ä–µ–µ** |
| **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | HTTP –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥—ã–π —Ä–∞–∑ | –ò–∑ –∫–µ—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞ | **–ë–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤** |

### –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

- **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ:** –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö:** **80-95% —ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞**
- **304 Not Modified:** –¢–æ–ª—å–∫–æ headers, –±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞

---

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –û–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è! –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –ø–∞–ø–∫—É - –¥–∞–Ω–Ω—ã–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è
2. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç–µ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ UI —Å–Ω–æ–≤–∞ - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
3. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –æ–Ω–∏ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞

### –†—É—á–Ω–∞—è –ø–µ—Ä–µ–∫—ç—à–∏—Ä–æ–≤–∫–∞ –ø–∞–ø–∫–∏

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–≤—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π):

**–ò–∑ –∫–æ–¥–∞:**
```javascript
const response = await fetch('/image-browsing/recache-folder', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ folder_path: '/output/my_folder' })
})

const result = await response.json()
console.log(`Recached ${result.data.count} files`)
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –£–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–≤—å—é –¥–ª—è —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ - –ø—Ä–µ–≤—å—é –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∑–∞–Ω–æ–≤–æ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Cache-Control –¥–∏—Ä–µ–∫—Ç–∏–≤—ã

#### `public, max-age=31536000, immutable`
- `public` - –º–æ–∂–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –ª—é–±—ã–º–∏ –∫–µ—à–∞–º–∏ (–±—Ä–∞—É–∑–µ—Ä, CDN, –ø—Ä–æ–∫—Å–∏)
- `max-age=31536000` - 1 –≥–æ–¥ (365 –¥–Ω–µ–π √ó 24 —á–∞—Å–∞ √ó 60 –º–∏–Ω—É—Ç √ó 60 —Å–µ–∫—É–Ω–¥)
- `immutable` - —Ñ–∞–π–ª –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è (–±—Ä–∞—É–∑–µ—Ä –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å)

#### `private, max-age=300, must-revalidate`
- `private` - —Ç–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä, –Ω–µ CDN/–ø—Ä–æ–∫—Å–∏
- `max-age=300` - 5 –º–∏–Ω—É—Ç
- `must-revalidate` - –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### ETag –º–µ—Ö–∞–Ω–∏–∑–º

**–î–ª—è —Ñ–∞–π–ª–æ–≤:**
```python
etag = f'"{mtime}-{size}"'  # –í—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ + —Ä–∞–∑–º–µ—Ä
```

**–î–ª—è –ø—Ä–µ–≤—å—é:**
```python
etag = f'"{md5(filepath + mtime + max_size)}"'  # MD5 —Ö–µ—à –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```

**–î–ª—è –ø–∞–ø–æ–∫:**
```python
etag = f'"{md5(directory + mtime)}"'  # MD5 —Ö–µ—à –ø—É—Ç–∏ + –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

### localStorage vs sessionStorage

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | sessionStorage | localStorage |
|----------------|----------------|--------------|
| –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ | –î–æ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏ | –ù–∞–≤—Å–µ–≥–¥–∞ |
| –†–∞–∑–º–µ—Ä | ~5-10 MB | ~5-10 MB |
| –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å | –¢–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–µ | –í–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö |
| **–ù–∞—à –≤—ã–±–æ—Ä** | ‚ùå | ‚úÖ |

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "–°—Ç–∞—Ä—ã–µ –ø—Ä–µ–≤—å—é –ø–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

**–†–µ—à–µ–Ω–∏–µ 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```javascript
// –í—ã–∑–≤–∞—Ç—å –ø–µ—Ä–µ–∫—ç—à–∏—Ä–æ–≤–∫—É –ø–∞–ø–∫–∏
await fetch('/image-browsing/recache-folder', {
  method: 'POST',
  body: JSON.stringify({ folder_path: '/output/...' })
})
```

**–†–µ—à–µ–Ω–∏–µ 2 (–∂–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞):**
- Ctrl + F5 (Windows/Linux)
- Cmd + Shift + R (Mac)

### –ü—Ä–æ–±–ª–µ–º–∞: "localStorage –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω"

**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–µ—à–µ

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ 50% –∑–∞–ø–∏—Å–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è –¥–∞–Ω–Ω—ã–º–∏

**–†—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
```javascript
// –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫–µ—à
localStorage.removeItem('folderCache')
location.reload()
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–î–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
3. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `304 Not Modified` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
4. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ - —Å–º. "–†–µ—à–µ–Ω–∏–µ 1" –≤—ã—à–µ

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–µ—à–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–µ—à–∞

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
const cacheData = localStorage.getItem('folderCache')
const sizeKB = new Blob([cacheData]).size / 1024
console.log(`Cache size: ${sizeKB.toFixed(2)} KB`)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π

```javascript
const cache = JSON.parse(localStorage.getItem('folderCache') || '{}')
console.log(`Cached folders: ${Object.keys(cache).length}`)
```

### –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞

```javascript
// –û—á–∏—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–µ—à –ø–∞–ø–æ–∫
localStorage.removeItem('folderCache')

// –ò–õ–ò –æ—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å localStorage
localStorage.clear()
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ü—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DevTools ‚Üí Disable cache
2. **–ü—Ä–∏ –¥–µ–ø–ª–æ–µ** - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (CSS/JS)
3. **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∫–µ—à–µ–º

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **–û–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–π—Ç–µ, –≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–ü–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - –≤—ã–∑–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–∫—ç—à–∏—Ä–æ–≤–∫—É –ø–∞–ø–∫–∏
3. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** - Ctrl+F5 –¥–ª—è –∂–µ—Å—Ç–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∞–∑–º–µ—Ä–æ–º disk cache (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 GB)
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞** - —á–µ—Ä–µ–∑ UI –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞
3. **–û—á–∏—Å—Ç–∫–∞** - DELETE /image-browsing/cache –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ/–ø–æ—Å–ª–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π: –û—Ç–∫—Ä—ã—Ç–∏–µ 10 –ø–∞–ø–æ–∫ –ø–æ 100 —Ñ–∞–π–ª–æ–≤

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –í—Ä–µ–º—è: ~30 —Å–µ–∫—É–Ω–¥
- –¢—Ä–∞—Ñ–∏–∫: ~50 MB (–ø—Ä–µ–≤—å—é)
- HTTP –∑–∞–ø—Ä–æ—Å–æ–≤: ~1000

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑):**
- –í—Ä–µ–º—è: ~25 —Å–µ–∫—É–Ω–¥ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à)
- –¢—Ä–∞—Ñ–∏–∫: ~50 MB
- HTTP –∑–∞–ø—Ä–æ—Å–æ–≤: ~1000

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø–æ–≤—Ç–æ—Ä–Ω–æ):**
- –í—Ä–µ–º—è: ~2 —Å–µ–∫—É–Ω–¥—ã (–∏–∑ –∫–µ—à–∞)
- –¢—Ä–∞—Ñ–∏–∫: ~10 KB (—Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ 304)
- HTTP –∑–∞–ø—Ä–æ—Å–æ–≤: ~10 (—Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è)

**–í—ã–∏–≥—Ä—ã—à –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏: 15x –ø–æ –≤—Ä–µ–º–µ–Ω–∏, 5000x –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É**

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ETag –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ª–ª–∏–∑–∏–π

- –í–∫–ª—é—á–∞–µ—Ç mtime + size –¥–ª—è —Ñ–∞–π–ª–æ–≤
- MD5 hash –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏: –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ 0

### Cache Poisoning –∑–∞—â–∏—Ç–∞

- `private` –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –ø–∞–ø–æ–∫ (–Ω–µ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ CDN)
- `public` —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ–¥–∏–∞
- ETag –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

### Privacy

- localStorage –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–æ–º –∂–µ origin
- –ù–µ—Ç —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—á–∏—Å—Ç–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

---

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### HTTP –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ best practices

- [MDN: HTTP Caching](https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching)
- [Web.dev: HTTP Cache](https://web.dev/http-cache/)
- [RFC 7234: HTTP Caching](https://tools.ietf.org/html/rfc7234)

### Web Storage API

- [MDN: localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)
- [Web Storage quota limits](https://web.dev/storage-for-the-web/)

---

**–í–µ—Ä—Å–∏—è:** 1.0.0
**–î–∞—Ç–∞:** 2026-01-10
**–ê–≤—Ç–æ—Ä:** Claude Code Optimization
